<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 4 Working with lists and iteration | TRES Tidyverse Tutorial</title>
  <meta name="description" content="Section 4 Working with lists and iteration | TRES Tidyverse Tutorial" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 4 Working with lists and iteration | TRES Tidyverse Tutorial" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Section 4 Working with lists and iteration | TRES Tidyverse Tutorial" />
  <meta name="github-repo" content="pratikunterwegs/tres-tidy-tutorial" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 4 Working with lists and iteration | TRES Tidyverse Tutorial" />
  
  <meta name="twitter:description" content="Section 4 Working with lists and iteration | TRES Tidyverse Tutorial" />
  

<meta name="author" content="Raphael, Pratik and Theo" />


<meta name="date" content="2020-06-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-manipulation-with-dplyr.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Outline</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#schedule"><i class="fa fa-check"></i>Schedule</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#possible-extras"><i class="fa fa-check"></i>Possible extras</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#join"><i class="fa fa-check"></i>Join</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html"><i class="fa fa-check"></i><b>1</b> Reading files and string manipulation</a><ul>
<li class="chapter" data-level="1.1" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#data-import-and-export-with-readr"><i class="fa fa-check"></i><b>1.1</b> Data import and export with <code>readr</code></a><ul>
<li class="chapter" data-level="1.1.1" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#reading-data"><i class="fa fa-check"></i><b>1.1.1</b> Reading data</a></li>
<li class="chapter" data-level="1.1.2" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#writing-data"><i class="fa fa-check"></i><b>1.1.2</b> Writing data</a></li>
<li class="chapter" data-level="1.1.3" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#reading-and-writing-lines"><i class="fa fa-check"></i><b>1.1.3</b> Reading and writing lines</a></li>
<li class="chapter" data-level="" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#excel-files"><i class="fa fa-check"></i>Excel files</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#string-manipulation-with-stringr"><i class="fa fa-check"></i><b>1.2</b> String manipulation with <code>stringr</code></a><ul>
<li class="chapter" data-level="1.2.1" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#putting-strings-together"><i class="fa fa-check"></i><b>1.2.1</b> Putting strings together</a></li>
<li class="chapter" data-level="1.2.2" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#detecting-strings"><i class="fa fa-check"></i><b>1.2.2</b> Detecting strings</a></li>
<li class="chapter" data-level="1.2.3" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#matching-strings"><i class="fa fa-check"></i><b>1.2.3</b> Matching strings</a></li>
<li class="chapter" data-level="1.2.4" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#simpler-pattern-extraction"><i class="fa fa-check"></i><b>1.2.4</b> Simpler pattern extraction</a></li>
<li class="chapter" data-level="1.2.5" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#breaking-strings-apart"><i class="fa fa-check"></i><b>1.2.5</b> Breaking strings apart</a></li>
<li class="chapter" data-level="1.2.6" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#replacing-string-elements"><i class="fa fa-check"></i><b>1.2.6</b> Replacing string elements</a></li>
<li class="chapter" data-level="1.2.7" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#subsetting-within-strings"><i class="fa fa-check"></i><b>1.2.7</b> Subsetting within strings</a></li>
<li class="chapter" data-level="1.2.8" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#padding-and-truncating-strings"><i class="fa fa-check"></i><b>1.2.8</b> Padding and truncating strings</a></li>
<li class="chapter" data-level="1.2.9" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#stringr-aspects-not-covered-here"><i class="fa fa-check"></i><b>1.2.9</b> Stringr aspects not covered here</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#string-interpolation-with-glue"><i class="fa fa-check"></i><b>1.3</b> String interpolation with <code>glue</code></a></li>
<li class="chapter" data-level="1.4" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#strings-in-ggplot"><i class="fa fa-check"></i><b>1.4</b> Strings in <code>ggplot</code></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><i class="fa fa-check"></i><b>2</b> Reshaping data tables in the tidyverse, and other things</a><ul>
<li class="chapter" data-level="2.1" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#the-new-data-frame-tibble"><i class="fa fa-check"></i><b>2.1</b> The new data frame: tibble</a></li>
<li class="chapter" data-level="2.2" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#the-concept-of-tidy-data"><i class="fa fa-check"></i><b>2.2</b> The concept of tidy data</a></li>
<li class="chapter" data-level="2.3" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#reshaping-with-tidyr"><i class="fa fa-check"></i><b>2.3</b> Reshaping with <code>tidyr</code></a><ul>
<li class="chapter" data-level="2.3.1" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#pivoting"><i class="fa fa-check"></i><b>2.3.1</b> Pivoting</a></li>
<li class="chapter" data-level="2.3.2" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#handling-missing-values"><i class="fa fa-check"></i><b>2.3.2</b> Handling missing values</a></li>
<li class="chapter" data-level="2.3.3" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#splitting-and-combining-cells"><i class="fa fa-check"></i><b>2.3.3</b> Splitting and combining cells</a></li>
<li class="chapter" data-level="2.3.4" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#expanding-tables-using-combinations"><i class="fa fa-check"></i><b>2.3.4</b> Expanding tables using combinations</a></li>
<li class="chapter" data-level="2.3.5" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#nesting"><i class="fa fa-check"></i><b>2.3.5</b> Nesting</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#extra-factors-and-the-forcats-package"><i class="fa fa-check"></i><b>2.4</b> Extra: factors and the <code>forcats</code> package</a><ul>
<li class="chapter" data-level="2.4.1" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#change-the-order-of-the-levels"><i class="fa fa-check"></i><b>2.4.1</b> Change the order of the levels</a></li>
<li class="chapter" data-level="2.4.2" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#change-the-levels-themselves"><i class="fa fa-check"></i><b>2.4.2</b> Change the levels themselves</a></li>
<li class="chapter" data-level="2.4.3" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#dropping-levels"><i class="fa fa-check"></i><b>2.4.3</b> Dropping levels</a></li>
<li class="chapter" data-level="2.4.4" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#other-things"><i class="fa fa-check"></i><b>2.4.4</b> Other things</a></li>
<li class="chapter" data-level="2.4.5" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#take-home-message-for-forcats"><i class="fa fa-check"></i><b>2.4.5</b> Take home message for forcats</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#external-resources"><i class="fa fa-check"></i><b>2.5</b> External resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html"><i class="fa fa-check"></i><b>3</b> Data manipulation with <code>dplyr</code></a><ul>
<li class="chapter" data-level="3.1" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#introduction"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#example-data-of-the-day"><i class="fa fa-check"></i><b>3.2</b> Example data of the day</a></li>
<li class="chapter" data-level="3.3" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#select-variables-with-select"><i class="fa fa-check"></i><b>3.3</b> Select variables with <code>select()</code></a></li>
<li class="chapter" data-level="3.4" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#select-observations-with-filter"><i class="fa fa-check"></i><b>3.4</b> Select observations with <code>filter()</code></a></li>
<li class="chapter" data-level="3.5" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#create-new-variables-with-mutate"><i class="fa fa-check"></i><b>3.5</b> Create new variables with <code>mutate()</code></a></li>
<li class="chapter" data-level="3.6" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#grouped-results-with-group_by-and-summarise"><i class="fa fa-check"></i><b>3.6</b> Grouped results with <code>group_by()</code> and <code>summarise()</code></a></li>
<li class="chapter" data-level="3.7" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#scoped-variables"><i class="fa fa-check"></i><b>3.7</b> Scoped variables</a></li>
<li class="chapter" data-level="3.8" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#more"><i class="fa fa-check"></i><b>3.8</b> More !</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html"><i class="fa fa-check"></i><b>4</b> Working with lists and iteration</a><ul>
<li class="chapter" data-level="4.1" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#list-columns-with-tidyr"><i class="fa fa-check"></i><b>4.1</b> List columns with <code>tidyr</code></a><ul>
<li class="chapter" data-level="4.1.1" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#nesting-data"><i class="fa fa-check"></i><b>4.1.1</b> Nesting data</a></li>
<li class="chapter" data-level="4.1.2" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#unnesting-data"><i class="fa fa-check"></i><b>4.1.2</b> Unnesting data</a></li>
<li class="chapter" data-level="4.1.3" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#working-with-list-columns"><i class="fa fa-check"></i><b>4.1.3</b> Working with list columns</a></li>
<li class="chapter" data-level="" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#functionals"><i class="fa fa-check"></i>Functionals</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#iteration-with-map"><i class="fa fa-check"></i><b>4.2</b> Iteration with <code>map</code></a><ul>
<li class="chapter" data-level="4.2.1" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#basic-use-of-map"><i class="fa fa-check"></i><b>4.2.1</b> Basic use of <code>map</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#map-variants-returning-vectors"><i class="fa fa-check"></i><b>4.2.2</b> <code>map</code> variants returning vectors</a></li>
<li class="chapter" data-level="4.2.3" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#map-variants-returning-data-frames"><i class="fa fa-check"></i><b>4.2.3</b> <code>map</code> variants returning data frames</a></li>
<li class="chapter" data-level="4.2.4" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#working-with-list-columns-using-map"><i class="fa fa-check"></i><b>4.2.4</b> Working with list columns using <code>map</code></a></li>
<li class="chapter" data-level="4.2.5" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#selective-mapping-using-map-variants"><i class="fa fa-check"></i><b>4.2.5</b> Selective mapping using <code>map</code> variants</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#more-map-variants"><i class="fa fa-check"></i><b>4.3</b> More <code>map</code> variants</a><ul>
<li class="chapter" data-level="4.3.1" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#mapping-over-two-inputs-with-map2"><i class="fa fa-check"></i><b>4.3.1</b> Mapping over two inputs with map2</a></li>
<li class="chapter" data-level="4.3.2" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#mapping-over-multiple-inputs-with-pmap"><i class="fa fa-check"></i><b>4.3.2</b> Mapping over multiple inputs with pmap</a></li>
<li class="chapter" data-level="4.3.3" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#mapping-at-depth"><i class="fa fa-check"></i><b>4.3.3</b> Mapping at depth</a></li>
<li class="chapter" data-level="4.3.4" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#iteration-without-a-return"><i class="fa fa-check"></i><b>4.3.4</b> Iteration without a return</a></li>
<li class="chapter" data-level="4.3.5" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#modify-rather-than-map"><i class="fa fa-check"></i><b>4.3.5</b> Modify rather than map</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#other-functions-for-working-with-lists"><i class="fa fa-check"></i><b>4.4</b> Other functions for working with lists</a><ul>
<li class="chapter" data-level="4.4.1" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#filtering-lists"><i class="fa fa-check"></i><b>4.4.1</b> Filtering lists</a></li>
<li class="chapter" data-level="4.4.2" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#summarising-lists"><i class="fa fa-check"></i><b>4.4.2</b> Summarising lists</a></li>
<li class="chapter" data-level="4.4.3" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#reduction-and-accumulation"><i class="fa fa-check"></i><b>4.4.3</b> Reduction and accumulation</a></li>
<li class="chapter" data-level="4.4.4" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#miscellaneous-operation"><i class="fa fa-check"></i><b>4.4.4</b> Miscellaneous operation</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#to-add-patchwork"><i class="fa fa-check"></i><b>4.5</b> To add: patchwork</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">TRES Tidyverse Tutorial</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="working-with-lists-and-iteration" class="section level1">
<h1><span class="header-section-number">Section 4</span> Working with lists and iteration</h1>
<p><img src="opening-image.png" /></p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" title="1"><span class="co"># load the tidyverse</span></a>
<a class="sourceLine" id="cb76-2" title="2"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<div id="list-columns-with-tidyr" class="section level2">
<h2><span class="header-section-number">4.1</span> List columns with <code>tidyr</code></h2>
<div id="nesting-data" class="section level3">
<h3><span class="header-section-number">4.1.1</span> Nesting data</h3>
<p>It may become necessary to indicate the groups of a tibble in a somewhat more explicit way than simply using <code>dplyr::group_by</code>. <code>tidyr</code> offers the option to create nested tibbles, that is, to store complex objects in the columns of a tibble. This includes other tibbles, as well as model objects and plots.</p>
<p><em>NB:</em> Nesting data is done using <code>tidyr::nest</code>, which is different from the similarly named <code>tidyr::nesting</code>.</p>
<p>The example below shows how <code>mtcars</code> can be converted into a nested tibble.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" title="1"><span class="co"># nest mtcars into a list of dataframes based on number of cylinders</span></a>
<a class="sourceLine" id="cb77-2" title="2">nested_cars =<span class="st"> </span><span class="kw">as_tibble</span>(mtcars, </a>
<a class="sourceLine" id="cb77-3" title="3">                        <span class="dt">rownames =</span> <span class="st">&quot;car_name&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb77-4" title="4"><span class="st">  </span><span class="kw">group_by</span>(cyl) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb77-5" title="5"><span class="st">  </span><span class="kw">nest</span>()</a>
<a class="sourceLine" id="cb77-6" title="6"></a>
<a class="sourceLine" id="cb77-7" title="7">nested_cars</a>
<a class="sourceLine" id="cb77-8" title="8"><span class="co">#&gt; # A tibble: 3 x 2</span></a>
<a class="sourceLine" id="cb77-9" title="9"><span class="co">#&gt; # Groups:   cyl [3]</span></a>
<a class="sourceLine" id="cb77-10" title="10"><span class="co">#&gt;     cyl data              </span></a>
<a class="sourceLine" id="cb77-11" title="11"><span class="co">#&gt;   &lt;dbl&gt; &lt;list&gt;            </span></a>
<a class="sourceLine" id="cb77-12" title="12"><span class="co">#&gt; 1     6 &lt;tibble [7 × 11]&gt; </span></a>
<a class="sourceLine" id="cb77-13" title="13"><span class="co">#&gt; 2     4 &lt;tibble [11 × 11]&gt;</span></a>
<a class="sourceLine" id="cb77-14" title="14"><span class="co">#&gt; 3     8 &lt;tibble [14 × 11]&gt;</span></a>
<a class="sourceLine" id="cb77-15" title="15"></a>
<a class="sourceLine" id="cb77-16" title="16"><span class="co"># get column class</span></a>
<a class="sourceLine" id="cb77-17" title="17"><span class="kw">sapply</span>(nested_cars, class)</a>
<a class="sourceLine" id="cb77-18" title="18"><span class="co">#&gt;       cyl      data </span></a>
<a class="sourceLine" id="cb77-19" title="19"><span class="co">#&gt; &quot;numeric&quot;    &quot;list&quot;</span></a></code></pre></div>
<p><code>mtcars</code> is now a nested data frame. The class of each of its columns is respectively, a numeric (number of cylinders) and a list (the data of all cars with as many cylinders as in the corresponding row).</p>
<p>While <code>nest</code> can be used without first grouping the tibble, it’s just much easier to group first.</p>
</div>
<div id="unnesting-data" class="section level3">
<h3><span class="header-section-number">4.1.2</span> Unnesting data</h3>
<p>A nested tibble can be converted back into the original, or into a processed form, using <code>tidyr::unnest</code>. The original groups are retained.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" title="1"><span class="co"># use unnest to recover the original data frame</span></a>
<a class="sourceLine" id="cb78-2" title="2"><span class="kw">unnest</span>(nested_cars, <span class="dt">cols =</span> <span class="st">&quot;data&quot;</span>)</a>
<a class="sourceLine" id="cb78-3" title="3"><span class="co">#&gt; # A tibble: 32 x 12</span></a>
<a class="sourceLine" id="cb78-4" title="4"><span class="co">#&gt; # Groups:   cyl [3]</span></a>
<a class="sourceLine" id="cb78-5" title="5"><span class="co">#&gt;     cyl car_name       mpg  disp    hp  drat    wt  qsec    vs    am  gear  carb</span></a>
<a class="sourceLine" id="cb78-6" title="6"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb78-7" title="7"><span class="co">#&gt; 1     6 Mazda RX4     21    160    110  3.9   2.62  16.5     0     1     4     4</span></a>
<a class="sourceLine" id="cb78-8" title="8"><span class="co">#&gt; 2     6 Mazda RX4 W…  21    160    110  3.9   2.88  17.0     0     1     4     4</span></a>
<a class="sourceLine" id="cb78-9" title="9"><span class="co">#&gt; 3     6 Hornet 4 Dr…  21.4  258    110  3.08  3.22  19.4     1     0     3     1</span></a>
<a class="sourceLine" id="cb78-10" title="10"><span class="co">#&gt; 4     6 Valiant       18.1  225    105  2.76  3.46  20.2     1     0     3     1</span></a>
<a class="sourceLine" id="cb78-11" title="11"><span class="co">#&gt; 5     6 Merc 280      19.2  168.   123  3.92  3.44  18.3     1     0     4     4</span></a>
<a class="sourceLine" id="cb78-12" title="12"><span class="co">#&gt; 6     6 Merc 280C     17.8  168.   123  3.92  3.44  18.9     1     0     4     4</span></a>
<a class="sourceLine" id="cb78-13" title="13"><span class="co">#&gt; # … with 26 more rows</span></a>
<a class="sourceLine" id="cb78-14" title="14"></a>
<a class="sourceLine" id="cb78-15" title="15"><span class="co"># unnesting preserves groups</span></a>
<a class="sourceLine" id="cb78-16" title="16"><span class="kw">groups</span>(<span class="kw">unnest</span>(nested_cars, <span class="dt">cols =</span> <span class="st">&quot;data&quot;</span>))</a>
<a class="sourceLine" id="cb78-17" title="17"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb78-18" title="18"><span class="co">#&gt; cyl</span></a></code></pre></div>
<p>The <code>unnest_longer</code> and <code>unnest_wider</code> variants of <code>unnest</code> are maturing functions, that is, not in their final form. They allow interesting variations on unnesting — these are shown here but advised against.</p>
<p>Unnest the data first, and then convert it to the form needed.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" title="1"><span class="kw">unnest_longer</span>(nested_cars, <span class="dt">col =</span> <span class="st">&quot;data&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb79-2" title="2"><span class="st">  </span><span class="kw">head</span>()</a>
<a class="sourceLine" id="cb79-3" title="3"><span class="co">#&gt; # A tibble: 6 x 2</span></a>
<a class="sourceLine" id="cb79-4" title="4"><span class="co">#&gt; # Groups:   cyl [1]</span></a>
<a class="sourceLine" id="cb79-5" title="5"><span class="co">#&gt;     cyl data$car_name  $mpg $disp   $hp $drat   $wt $qsec   $vs   $am $gear</span></a>
<a class="sourceLine" id="cb79-6" title="6"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;         &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb79-7" title="7"><span class="co">#&gt; 1     6 Mazda RX4      21    160    110  3.9   2.62  16.5     0     1     4</span></a>
<a class="sourceLine" id="cb79-8" title="8"><span class="co">#&gt; 2     6 Mazda RX4 Wag  21    160    110  3.9   2.88  17.0     0     1     4</span></a>
<a class="sourceLine" id="cb79-9" title="9"><span class="co">#&gt; 3     6 Hornet 4 Dri…  21.4  258    110  3.08  3.22  19.4     1     0     3</span></a>
<a class="sourceLine" id="cb79-10" title="10"><span class="co">#&gt; 4     6 Valiant        18.1  225    105  2.76  3.46  20.2     1     0     3</span></a>
<a class="sourceLine" id="cb79-11" title="11"><span class="co">#&gt; 5     6 Merc 280       19.2  168.   123  3.92  3.44  18.3     1     0     4</span></a>
<a class="sourceLine" id="cb79-12" title="12"><span class="co">#&gt; 6     6 Merc 280C      17.8  168.   123  3.92  3.44  18.9     1     0     4</span></a>
<a class="sourceLine" id="cb79-13" title="13"><span class="co">#&gt; # … with 1 more variable: $carb &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb79-14" title="14"></a>
<a class="sourceLine" id="cb79-15" title="15"><span class="kw">unnest_wider</span>(nested_cars, <span class="dt">col =</span> <span class="st">&quot;data&quot;</span>)</a>
<a class="sourceLine" id="cb79-16" title="16"><span class="co">#&gt; # A tibble: 3 x 12</span></a>
<a class="sourceLine" id="cb79-17" title="17"><span class="co">#&gt; # Groups:   cyl [3]</span></a>
<a class="sourceLine" id="cb79-18" title="18"><span class="co">#&gt;     cyl car_name  mpg    disp   hp     drat  wt    qsec  vs    am    gear  carb </span></a>
<a class="sourceLine" id="cb79-19" title="19"><span class="co">#&gt;   &lt;dbl&gt; &lt;list&gt;    &lt;list&gt; &lt;list&gt; &lt;list&gt; &lt;lis&gt; &lt;lis&gt; &lt;lis&gt; &lt;lis&gt; &lt;lis&gt; &lt;lis&gt; &lt;lis&gt;</span></a>
<a class="sourceLine" id="cb79-20" title="20"><span class="co">#&gt; 1     6 &lt;chr [7]&gt; &lt;dbl … &lt;dbl … &lt;dbl … &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl…</span></a>
<a class="sourceLine" id="cb79-21" title="21"><span class="co">#&gt; 2     4 &lt;chr [11… &lt;dbl … &lt;dbl … &lt;dbl … &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl…</span></a>
<a class="sourceLine" id="cb79-22" title="22"><span class="co">#&gt; 3     8 &lt;chr [14… &lt;dbl … &lt;dbl … &lt;dbl … &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl…</span></a></code></pre></div>
</div>
<div id="working-with-list-columns" class="section level3">
<h3><span class="header-section-number">4.1.3</span> Working with list columns</h3>
<p>The class of a list column is <code>list</code>, and working with list columns (and lists, and list-like objects such as vectors) makes iteration necessary, since this is one of the only ways to operate on lists.</p>
<p>Two examples are shown below when getting the class and number of rows of the nested tibbles in the list column.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" title="1"><span class="co"># how many rows in each nested tibble?</span></a>
<a class="sourceLine" id="cb80-2" title="2"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(nested_cars<span class="op">$</span>data)) {</a>
<a class="sourceLine" id="cb80-3" title="3">  <span class="kw">print</span>(<span class="kw">nrow</span>(nested_cars<span class="op">$</span>data[[i]]))</a>
<a class="sourceLine" id="cb80-4" title="4">}</a>
<a class="sourceLine" id="cb80-5" title="5"><span class="co">#&gt; [1] 7</span></a>
<a class="sourceLine" id="cb80-6" title="6"><span class="co">#&gt; [1] 11</span></a>
<a class="sourceLine" id="cb80-7" title="7"><span class="co">#&gt; [1] 14</span></a>
<a class="sourceLine" id="cb80-8" title="8"></a>
<a class="sourceLine" id="cb80-9" title="9"><span class="co"># what is the class of each element?</span></a>
<a class="sourceLine" id="cb80-10" title="10"><span class="kw">lapply</span>(<span class="dt">X =</span> nested_cars<span class="op">$</span>data, <span class="dt">FUN =</span> class)</a>
<a class="sourceLine" id="cb80-11" title="11"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb80-12" title="12"><span class="co">#&gt; [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</span></a>
<a class="sourceLine" id="cb80-13" title="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb80-14" title="14"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb80-15" title="15"><span class="co">#&gt; [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</span></a>
<a class="sourceLine" id="cb80-16" title="16"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb80-17" title="17"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb80-18" title="18"><span class="co">#&gt; [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</span></a></code></pre></div>
</div>
<div id="functionals" class="section level3 unnumbered">
<h3>Functionals</h3>
<p>The second example uses <code>lapply</code>, and this is a <em>functional</em>. <em>Functionals</em> are functions that take another function as one of their arguments. Base <code>R</code> functionals include the <code>*apply</code> family of functions: <code>apply</code>, <code>lapply</code>, <code>vapply</code> and so on.</p>
</div>
</div>
<div id="iteration-with-map" class="section level2">
<h2><span class="header-section-number">4.2</span> Iteration with <code>map</code></h2>
<p>The <code>tidyverse</code> replaces traditional loop-based iteration with <em>functionals</em> from the <code>purrr</code> package. A good reason to use <code>purrr</code> functionals instead of base <code>R</code> functionals is their consistent and clear naming, which always indicates how they should be used.
This is explained in the examples below.</p>
<p>How <code>map</code> is different from <code>for</code> and <code>lapply</code> are best explained in the <strong><a href="https://adv-r.hadley.nz/functionals.html">Advanced R Book</a></strong>.</p>
<div id="basic-use-of-map" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Basic use of <code>map</code></h3>
<p><code>map</code> works very similarly to <code>lapply</code>, where <code>.x</code> is object on whose elements to apply the function <code>.f</code>.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" title="1"><span class="co"># get the number of rows in data</span></a>
<a class="sourceLine" id="cb81-2" title="2"><span class="kw">map</span>(<span class="dt">.x =</span> nested_cars<span class="op">$</span>data, <span class="dt">.f =</span> nrow)</a>
<a class="sourceLine" id="cb81-3" title="3"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb81-4" title="4"><span class="co">#&gt; [1] 7</span></a>
<a class="sourceLine" id="cb81-5" title="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb81-6" title="6"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb81-7" title="7"><span class="co">#&gt; [1] 11</span></a>
<a class="sourceLine" id="cb81-8" title="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb81-9" title="9"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb81-10" title="10"><span class="co">#&gt; [1] 14</span></a></code></pre></div>
<p><code>map</code> works on any list-like object, which includes vectors, and always returns a list. <code>map</code> takes two arguments, the object on which to operate, and the function to apply to each element.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" title="1"><span class="co"># get the square root of each integer 1 - 10</span></a>
<a class="sourceLine" id="cb82-2" title="2">some_numbers =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span></a>
<a class="sourceLine" id="cb82-3" title="3"><span class="kw">map</span>(some_numbers, sqrt)</a>
<a class="sourceLine" id="cb82-4" title="4"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb82-5" title="5"><span class="co">#&gt; [1] 1</span></a>
<a class="sourceLine" id="cb82-6" title="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb82-7" title="7"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb82-8" title="8"><span class="co">#&gt; [1] 1.41</span></a>
<a class="sourceLine" id="cb82-9" title="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb82-10" title="10"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb82-11" title="11"><span class="co">#&gt; [1] 1.73</span></a></code></pre></div>
</div>
<div id="map-variants-returning-vectors" class="section level3">
<h3><span class="header-section-number">4.2.2</span> <code>map</code> variants returning vectors</h3>
<p>Though <code>map</code> always returns a list, it has variants named <code>map_*</code> where the suffix indicates the return type.
<code>map_chr</code>, <code>map_dbl</code>, <code>map_int</code>, and <code>map_lgl</code> return character, double (numeric), integer, and logical vectors.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" title="1"><span class="co"># use map_dbl to get a vector of square roots</span></a>
<a class="sourceLine" id="cb83-2" title="2">some_numbers =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb83-3" title="3"><span class="kw">map_dbl</span>(some_numbers, sqrt)</a>
<a class="sourceLine" id="cb83-4" title="4"><span class="co">#&gt;  [1] 1.00 1.41 1.73 2.00 2.24 2.45 2.65 2.83 3.00 3.16</span></a>
<a class="sourceLine" id="cb83-5" title="5"></a>
<a class="sourceLine" id="cb83-6" title="6"><span class="co"># map_chr will convert the output to a character</span></a>
<a class="sourceLine" id="cb83-7" title="7"><span class="kw">map_chr</span>(some_numbers, sqrt)</a>
<a class="sourceLine" id="cb83-8" title="8"><span class="co">#&gt;  [1] &quot;1.000000&quot; &quot;1.414214&quot; &quot;1.732051&quot; &quot;2.000000&quot; &quot;2.236068&quot; &quot;2.449490&quot;</span></a>
<a class="sourceLine" id="cb83-9" title="9"><span class="co">#&gt;  [7] &quot;2.645751&quot; &quot;2.828427&quot; &quot;3.000000&quot; &quot;3.162278&quot;</span></a>
<a class="sourceLine" id="cb83-10" title="10"></a>
<a class="sourceLine" id="cb83-11" title="11"><span class="co"># map_lgl returns TRUE/FALSE values</span></a>
<a class="sourceLine" id="cb83-12" title="12">some_numbers =<span class="st"> </span><span class="kw">c</span>(<span class="ot">NA</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="ot">NA</span>, <span class="ot">NaN</span>, <span class="ot">Inf</span>, <span class="op">-</span><span class="ot">Inf</span>)</a>
<a class="sourceLine" id="cb83-13" title="13"><span class="kw">map_lgl</span>(some_numbers, is.na)</a>
<a class="sourceLine" id="cb83-14" title="14"><span class="co">#&gt; [1]  TRUE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE</span></a></code></pre></div>
</div>
<div id="map-variants-returning-data-frames" class="section level3">
<h3><span class="header-section-number">4.2.3</span> <code>map</code> variants returning data frames</h3>
<p><code>map_df</code> returns data frames, and by default binds dataframes by rows, while <code>map_dfr</code> does this explicitly, and <code>map_dfc</code> does returns a dataframe bound by column.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" title="1"><span class="co"># split mtcars into 3 dataframes, one per cylinder number</span></a>
<a class="sourceLine" id="cb84-2" title="2">some_list =<span class="st"> </span><span class="kw">split</span>(mtcars, mtcars<span class="op">$</span>cyl)</a>
<a class="sourceLine" id="cb84-3" title="3"></a>
<a class="sourceLine" id="cb84-4" title="4"><span class="co"># get the first two rows of each dataframe</span></a>
<a class="sourceLine" id="cb84-5" title="5"><span class="kw">map_df</span>(some_list, head, <span class="dt">n =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb84-6" title="6"><span class="co">#&gt;                    mpg cyl disp  hp drat   wt qsec vs am gear carb</span></a>
<a class="sourceLine" id="cb84-7" title="7"><span class="co">#&gt; Datsun 710        22.8   4  108  93 3.85 2.32 18.6  1  1    4    1</span></a>
<a class="sourceLine" id="cb84-8" title="8"><span class="co">#&gt; Merc 240D         24.4   4  147  62 3.69 3.19 20.0  1  0    4    2</span></a>
<a class="sourceLine" id="cb84-9" title="9"><span class="co">#&gt; Mazda RX4         21.0   6  160 110 3.90 2.62 16.5  0  1    4    4</span></a>
<a class="sourceLine" id="cb84-10" title="10"><span class="co">#&gt; Mazda RX4 Wag     21.0   6  160 110 3.90 2.88 17.0  0  1    4    4</span></a>
<a class="sourceLine" id="cb84-11" title="11"><span class="co">#&gt; Hornet Sportabout 18.7   8  360 175 3.15 3.44 17.0  0  0    3    2</span></a>
<a class="sourceLine" id="cb84-12" title="12"><span class="co">#&gt; Duster 360        14.3   8  360 245 3.21 3.57 15.8  0  0    3    4</span></a></code></pre></div>
<p><code>map</code> accepts arguments to the function being mapped, such as in the example above, where <code>head()</code> accepts the argument <code>n = 2</code>.</p>
<p><code>map_dfr</code> behaves the same as <code>map_df</code>.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb85-1" title="1"><span class="co"># the same as above but with a pipe</span></a>
<a class="sourceLine" id="cb85-2" title="2">some_list <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb85-3" title="3"><span class="st">  </span><span class="kw">map_dfr</span>(head, <span class="dt">n =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb85-4" title="4"><span class="co">#&gt;                    mpg cyl disp  hp drat   wt qsec vs am gear carb</span></a>
<a class="sourceLine" id="cb85-5" title="5"><span class="co">#&gt; Datsun 710        22.8   4  108  93 3.85 2.32 18.6  1  1    4    1</span></a>
<a class="sourceLine" id="cb85-6" title="6"><span class="co">#&gt; Merc 240D         24.4   4  147  62 3.69 3.19 20.0  1  0    4    2</span></a>
<a class="sourceLine" id="cb85-7" title="7"><span class="co">#&gt; Mazda RX4         21.0   6  160 110 3.90 2.62 16.5  0  1    4    4</span></a>
<a class="sourceLine" id="cb85-8" title="8"><span class="co">#&gt; Mazda RX4 Wag     21.0   6  160 110 3.90 2.88 17.0  0  1    4    4</span></a>
<a class="sourceLine" id="cb85-9" title="9"><span class="co">#&gt; Hornet Sportabout 18.7   8  360 175 3.15 3.44 17.0  0  0    3    2</span></a>
<a class="sourceLine" id="cb85-10" title="10"><span class="co">#&gt; Duster 360        14.3   8  360 245 3.21 3.57 15.8  0  0    3    4</span></a></code></pre></div>
<p><code>map_dfc</code> binds the resulting 3 data frames of two rows each by column, and automatically repairs the column names, adding a suffix to each duplicate.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb86-1" title="1">some_list <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb86-2" title="2"><span class="st">  </span><span class="kw">map_dfc</span>(head, <span class="dt">n =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb86-3" title="3"><span class="co">#&gt;            mpg...1 cyl...2 disp...3 hp...4 drat...5 wt...6 qsec...7 vs...8</span></a>
<a class="sourceLine" id="cb86-4" title="4"><span class="co">#&gt; Datsun 710    22.8       4      108     93     3.85   2.32     18.6      1</span></a>
<a class="sourceLine" id="cb86-5" title="5"><span class="co">#&gt; Merc 240D     24.4       4      147     62     3.69   3.19     20.0      1</span></a>
<a class="sourceLine" id="cb86-6" title="6"><span class="co">#&gt;            am...9 gear...10 carb...11 mpg...12 cyl...13 disp...14 hp...15</span></a>
<a class="sourceLine" id="cb86-7" title="7"><span class="co">#&gt; Datsun 710      1         4         1       21        6       160     110</span></a>
<a class="sourceLine" id="cb86-8" title="8"><span class="co">#&gt; Merc 240D       0         4         2       21        6       160     110</span></a>
<a class="sourceLine" id="cb86-9" title="9"><span class="co">#&gt;            drat...16 wt...17 qsec...18 vs...19 am...20 gear...21 carb...22</span></a>
<a class="sourceLine" id="cb86-10" title="10"><span class="co">#&gt; Datsun 710       3.9    2.62      16.5       0       1         4         4</span></a>
<a class="sourceLine" id="cb86-11" title="11"><span class="co">#&gt; Merc 240D        3.9    2.88      17.0       0       1         4         4</span></a>
<a class="sourceLine" id="cb86-12" title="12"><span class="co">#&gt;            mpg...23 cyl...24 disp...25 hp...26 drat...27 wt...28 qsec...29</span></a>
<a class="sourceLine" id="cb86-13" title="13"><span class="co">#&gt; Datsun 710     18.7        8       360     175      3.15    3.44      17.0</span></a>
<a class="sourceLine" id="cb86-14" title="14"><span class="co">#&gt; Merc 240D      14.3        8       360     245      3.21    3.57      15.8</span></a>
<a class="sourceLine" id="cb86-15" title="15"><span class="co">#&gt;            vs...30 am...31 gear...32 carb...33</span></a>
<a class="sourceLine" id="cb86-16" title="16"><span class="co">#&gt; Datsun 710       0       0         3         2</span></a>
<a class="sourceLine" id="cb86-17" title="17"><span class="co">#&gt; Merc 240D        0       0         3         4</span></a></code></pre></div>
</div>
<div id="working-with-list-columns-using-map" class="section level3">
<h3><span class="header-section-number">4.2.4</span> Working with list columns using <code>map</code></h3>
<p>The various <code>map</code> versions integrate well with list columns to make synthetic/summary data. In the example, the <code>dplyr::mutate</code> function is used to add three columns to the nested tibble: the number of rows, the mean mileage, and the name of the first car.</p>
<p>In each of these cases, the vectors added are generated using <code>purrr</code> functions.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" title="1"><span class="co"># get the number of rows per dataframe, the mean mileage, and the first car</span></a>
<a class="sourceLine" id="cb87-2" title="2">nested_cars =<span class="st"> </span>nested_cars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb87-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb87-4" title="4">    <span class="co"># use the int return to get the number of rows</span></a>
<a class="sourceLine" id="cb87-5" title="5">    <span class="dt">n_rows =</span> <span class="kw">map_int</span>(data, nrow),</a>
<a class="sourceLine" id="cb87-6" title="6">    </a>
<a class="sourceLine" id="cb87-7" title="7">    <span class="co"># double return for mean mileage</span></a>
<a class="sourceLine" id="cb87-8" title="8">    <span class="dt">mean_mpg =</span> <span class="kw">map_dbl</span>(data, <span class="cf">function</span>(df) {<span class="kw">mean</span>(df<span class="op">$</span>mpg)}),</a>
<a class="sourceLine" id="cb87-9" title="9">    </a>
<a class="sourceLine" id="cb87-10" title="10">    <span class="co"># character return to get first car</span></a>
<a class="sourceLine" id="cb87-11" title="11">    <span class="dt">first_car =</span> <span class="kw">map_chr</span>(data, <span class="cf">function</span>(df) {<span class="kw">first</span>(df<span class="op">$</span>car_name)}</a>
<a class="sourceLine" id="cb87-12" title="12">    )</a>
<a class="sourceLine" id="cb87-13" title="13">  )</a>
<a class="sourceLine" id="cb87-14" title="14"></a>
<a class="sourceLine" id="cb87-15" title="15"><span class="co"># examine the output</span></a>
<a class="sourceLine" id="cb87-16" title="16">nested_cars</a>
<a class="sourceLine" id="cb87-17" title="17"><span class="co">#&gt; # A tibble: 3 x 5</span></a>
<a class="sourceLine" id="cb87-18" title="18"><span class="co">#&gt; # Groups:   cyl [3]</span></a>
<a class="sourceLine" id="cb87-19" title="19"><span class="co">#&gt;     cyl data               n_rows mean_mpg first_car        </span></a>
<a class="sourceLine" id="cb87-20" title="20"><span class="co">#&gt;   &lt;dbl&gt; &lt;list&gt;              &lt;int&gt;    &lt;dbl&gt; &lt;chr&gt;            </span></a>
<a class="sourceLine" id="cb87-21" title="21"><span class="co">#&gt; 1     6 &lt;tibble [7 × 11]&gt;       7     19.7 Mazda RX4        </span></a>
<a class="sourceLine" id="cb87-22" title="22"><span class="co">#&gt; 2     4 &lt;tibble [11 × 11]&gt;     11     26.7 Datsun 710       </span></a>
<a class="sourceLine" id="cb87-23" title="23"><span class="co">#&gt; 3     8 &lt;tibble [14 × 11]&gt;     14     15.1 Hornet Sportabout</span></a></code></pre></div>
</div>
<div id="selective-mapping-using-map-variants" class="section level3">
<h3><span class="header-section-number">4.2.5</span> Selective mapping using <code>map</code> variants</h3>
<p><code>map_at</code> and <code>map_if</code> work like other <code>*_at</code> and <code>*_if</code> functions. Here, <code>map_if</code> is used to run a linear model only on those tibbles which have sufficient data. The predicate is specified by <code>.p</code>.</p>
<p>In this example, the nested tibble is given a new column using <code>dplyr::mutate</code>, where the data to be added is a mixed list.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb88-1" title="1"><span class="co"># split mtcars by cylinder number and run an lm only if there are more than 10 rows</span></a>
<a class="sourceLine" id="cb88-2" title="2">data =<span class="st"> </span><span class="kw">nest</span>(mtcars, <span class="dt">data =</span> <span class="op">-</span>cyl)</a>
<a class="sourceLine" id="cb88-3" title="3"></a>
<a class="sourceLine" id="cb88-4" title="4">data =<span class="st"> </span><span class="kw">mutate</span>(data,</a>
<a class="sourceLine" id="cb88-5" title="5">               <span class="dt">model =</span> <span class="kw">map_if</span>(<span class="dt">.x =</span> data,</a>
<a class="sourceLine" id="cb88-6" title="6">                              <span class="dt">.p =</span> <span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb88-7" title="7">                                <span class="kw">nrow</span>(x) <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb88-8" title="8">                              },</a>
<a class="sourceLine" id="cb88-9" title="9">                              <span class="dt">.f =</span> <span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb88-10" title="10">                                <span class="kw">lm</span>(mpg <span class="op">~</span><span class="st"> </span>wt, <span class="dt">data =</span> x)</a>
<a class="sourceLine" id="cb88-11" title="11">                              }))</a>
<a class="sourceLine" id="cb88-12" title="12"><span class="co"># check the data structure</span></a>
<a class="sourceLine" id="cb88-13" title="13">data</a>
<a class="sourceLine" id="cb88-14" title="14"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb88-15" title="15"><span class="co">#&gt;     cyl data               model            </span></a>
<a class="sourceLine" id="cb88-16" title="16"><span class="co">#&gt;   &lt;dbl&gt; &lt;list&gt;             &lt;list&gt;           </span></a>
<a class="sourceLine" id="cb88-17" title="17"><span class="co">#&gt; 1     6 &lt;tibble [7 × 10]&gt;  &lt;tibble [7 × 10]&gt;</span></a>
<a class="sourceLine" id="cb88-18" title="18"><span class="co">#&gt; 2     4 &lt;tibble [11 × 10]&gt; &lt;lm&gt;             </span></a>
<a class="sourceLine" id="cb88-19" title="19"><span class="co">#&gt; 3     8 &lt;tibble [14 × 10]&gt; &lt;lm&gt;</span></a></code></pre></div>
<p>The first element is a tibble of the corresponding element in <code>mtcars$cars</code>, which has not been operated on because it has fewer than 10 rows. The remaining elements are <code>lm</code> objects.</p>
</div>
</div>
<div id="more-map-variants" class="section level2">
<h2><span class="header-section-number">4.3</span> More <code>map</code> variants</h2>
<p><code>map</code> also has variants along the axis of how many elements are operated upon. <code>map2</code> operates on two vectors or list-like elements, and returns a single list as output, while <code>pmap</code> operates on a list of list-like elements.
The output has as many elements as the input lists, which must be of the same length.</p>
<div id="mapping-over-two-inputs-with-map2" class="section level3">
<h3><span class="header-section-number">4.3.1</span> Mapping over two inputs with map2</h3>
<p><code>map2</code> has the same variants as <code>map</code>, allowing for different return types.
Here <code>map2_int</code> returns an integer vector.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" title="1"><span class="co"># consider 2 vectors and replicate the simple vector addition using map2</span></a>
<a class="sourceLine" id="cb89-2" title="2"><span class="kw">map2_int</span>(<span class="dt">.x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, </a>
<a class="sourceLine" id="cb89-3" title="3">     <span class="dt">.y =</span> <span class="dv">6</span><span class="op">:</span><span class="dv">10</span>,</a>
<a class="sourceLine" id="cb89-4" title="4">     <span class="dt">.f =</span> sum)</a>
<a class="sourceLine" id="cb89-5" title="5"><span class="co">#&gt; [1]  7  9 11 13 15</span></a></code></pre></div>
<p><code>map2</code> doesn’t have <code>_at</code> and <code>_if</code> variants.</p>
<p>One use case for <code>map2</code> is to deal with both a list element and its index, as shown in the example. This may be necessary when the list index is removed in a <code>split</code> or <code>nest</code>. This can also be done with <code>imap</code>, where the index is referred to as <code>.y</code>.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb90-1" title="1"><span class="co"># make a named list for this example</span></a>
<a class="sourceLine" id="cb90-2" title="2">this_list =<span class="st"> </span><span class="kw">list</span>(<span class="dt">a =</span> <span class="st">&quot;first letter&quot;</span>,</a>
<a class="sourceLine" id="cb90-3" title="3">                 <span class="dt">b =</span> <span class="st">&quot;second letter&quot;</span>)</a>
<a class="sourceLine" id="cb90-4" title="4"></a>
<a class="sourceLine" id="cb90-5" title="5"><span class="co"># a not particularly useful example</span></a>
<a class="sourceLine" id="cb90-6" title="6"><span class="kw">map2</span>(this_list, <span class="kw">names</span>(this_list),</a>
<a class="sourceLine" id="cb90-7" title="7">     <span class="cf">function</span>(x, y) {</a>
<a class="sourceLine" id="cb90-8" title="8">       glue<span class="op">::</span><span class="kw">glue</span>(<span class="st">&#39;{x} : {y}&#39;</span>)</a>
<a class="sourceLine" id="cb90-9" title="9">     })</a>
<a class="sourceLine" id="cb90-10" title="10"><span class="co">#&gt; $a</span></a>
<a class="sourceLine" id="cb90-11" title="11"><span class="co">#&gt; first letter : a</span></a>
<a class="sourceLine" id="cb90-12" title="12"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb90-13" title="13"><span class="co">#&gt; $b</span></a>
<a class="sourceLine" id="cb90-14" title="14"><span class="co">#&gt; second letter : b</span></a>
<a class="sourceLine" id="cb90-15" title="15"></a>
<a class="sourceLine" id="cb90-16" title="16"><span class="co"># imap can also do this</span></a>
<a class="sourceLine" id="cb90-17" title="17"><span class="kw">imap</span>(this_list,</a>
<a class="sourceLine" id="cb90-18" title="18">     <span class="cf">function</span>(x, .y){</a>
<a class="sourceLine" id="cb90-19" title="19">       glue<span class="op">::</span><span class="kw">glue</span>(<span class="st">&#39;{x} : {.y}&#39;</span>)</a>
<a class="sourceLine" id="cb90-20" title="20">     })</a>
<a class="sourceLine" id="cb90-21" title="21"><span class="co">#&gt; $a</span></a>
<a class="sourceLine" id="cb90-22" title="22"><span class="co">#&gt; first letter : a</span></a>
<a class="sourceLine" id="cb90-23" title="23"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb90-24" title="24"><span class="co">#&gt; $b</span></a>
<a class="sourceLine" id="cb90-25" title="25"><span class="co">#&gt; second letter : b</span></a></code></pre></div>
</div>
<div id="mapping-over-multiple-inputs-with-pmap" class="section level3">
<h3><span class="header-section-number">4.3.2</span> Mapping over multiple inputs with pmap</h3>
<p><code>pmap</code> instead operates on a list of multiple list-like objects, and also comes with the same return type variants as <code>map</code>. The example shows both aspects of <code>pmap</code> using <code>pmap_chr</code>.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb91-1" title="1"><span class="co"># operate on three different lists</span></a>
<a class="sourceLine" id="cb91-2" title="2">list_<span class="dv">01</span> =<span class="st"> </span><span class="kw">as.list</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb91-3" title="3">list_<span class="dv">02</span> =<span class="st"> </span><span class="kw">as.list</span>(letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>])</a>
<a class="sourceLine" id="cb91-4" title="4">list_<span class="dv">03</span> =<span class="st"> </span><span class="kw">as.list</span>(<span class="kw">rainbow</span>(<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb91-5" title="5"></a>
<a class="sourceLine" id="cb91-6" title="6"><span class="co"># print a few statements</span></a>
<a class="sourceLine" id="cb91-7" title="7"><span class="kw">pmap_chr</span>(<span class="kw">list</span>(list_<span class="dv">01</span>, list_<span class="dv">02</span>, list_<span class="dv">03</span>),</a>
<a class="sourceLine" id="cb91-8" title="8">     <span class="cf">function</span>(l1, l2, l3){</a>
<a class="sourceLine" id="cb91-9" title="9">       glue<span class="op">::</span><span class="kw">glue</span>(<span class="st">&#39;number {l1}, letter {l2}, colour {l3}&#39;</span>)</a>
<a class="sourceLine" id="cb91-10" title="10">     })</a>
<a class="sourceLine" id="cb91-11" title="11"><span class="co">#&gt; [1] &quot;number 1, letter a, colour #FF0000FF&quot;</span></a>
<a class="sourceLine" id="cb91-12" title="12"><span class="co">#&gt; [2] &quot;number 2, letter b, colour #00FF00FF&quot;</span></a>
<a class="sourceLine" id="cb91-13" title="13"><span class="co">#&gt; [3] &quot;number 3, letter c, colour #0000FFFF&quot;</span></a></code></pre></div>
</div>
<div id="mapping-at-depth" class="section level3">
<h3><span class="header-section-number">4.3.3</span> Mapping at depth</h3>
<p>Lists are often nested, that is, a list element may itself be a list. It is possible to map a function over elements as a specific depth.</p>
<p>In the example, <code>mtcars</code> is split by cylinders, and then by gears, creating a two-level list, with the second layer operated on.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" title="1"><span class="co"># use map to make a 2 level list</span></a>
<a class="sourceLine" id="cb92-2" title="2">this_list =<span class="st"> </span><span class="kw">split</span>(mtcars, mtcars<span class="op">$</span>cyl) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb92-3" title="3"><span class="st">  </span><span class="kw">map</span>(<span class="cf">function</span>(df){ <span class="kw">split</span>(df, df<span class="op">$</span>gear) })</a>
<a class="sourceLine" id="cb92-4" title="4"></a>
<a class="sourceLine" id="cb92-5" title="5"><span class="co"># map over the second level to count the number of </span></a>
<a class="sourceLine" id="cb92-6" title="6"><span class="co"># cars with N gears in the set of cars with M cylinders</span></a>
<a class="sourceLine" id="cb92-7" title="7"><span class="co"># display only for cyl = 4</span></a>
<a class="sourceLine" id="cb92-8" title="8"><span class="kw">map_depth</span>(this_list[<span class="dv">1</span>], <span class="dv">2</span>, nrow)</a>
<a class="sourceLine" id="cb92-9" title="9"><span class="co">#&gt; $`4`</span></a>
<a class="sourceLine" id="cb92-10" title="10"><span class="co">#&gt; $`4`$`3`</span></a>
<a class="sourceLine" id="cb92-11" title="11"><span class="co">#&gt; [1] 1</span></a>
<a class="sourceLine" id="cb92-12" title="12"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb92-13" title="13"><span class="co">#&gt; $`4`$`4`</span></a>
<a class="sourceLine" id="cb92-14" title="14"><span class="co">#&gt; [1] 8</span></a>
<a class="sourceLine" id="cb92-15" title="15"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb92-16" title="16"><span class="co">#&gt; $`4`$`5`</span></a>
<a class="sourceLine" id="cb92-17" title="17"><span class="co">#&gt; [1] 2</span></a></code></pre></div>
</div>
<div id="iteration-without-a-return" class="section level3">
<h3><span class="header-section-number">4.3.4</span> Iteration without a return</h3>
<p><code>map</code> and its variants have a return type, which is either a list or a vector.
However, it is often necessary to iterate a function over a list-like object for that function’s side effects, such as printing a message to screen, plotting a series of figures, or saving to file.</p>
<p><code>walk</code> is the function for this task. It has only the variants <code>walk2</code>, <code>iwalk</code>, and <code>pwalk</code>, whose logic is similar to <code>map2</code>, <code>imap</code>, and <code>pmap</code>. In the example, the function applied to each list element is intended to print a message.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" title="1">this_list =<span class="st"> </span><span class="kw">split</span>(mtcars, mtcars<span class="op">$</span>cyl)</a>
<a class="sourceLine" id="cb93-2" title="2"></a>
<a class="sourceLine" id="cb93-3" title="3"><span class="kw">iwalk</span>(this_list,</a>
<a class="sourceLine" id="cb93-4" title="4">     <span class="cf">function</span>(df, .y){</a>
<a class="sourceLine" id="cb93-5" title="5">       <span class="kw">message</span>(glue<span class="op">::</span><span class="kw">glue</span>(<span class="st">&#39;{nrow(df)} cars with {.y} cylinders&#39;</span>))</a>
<a class="sourceLine" id="cb93-6" title="6">     })</a></code></pre></div>
</div>
<div id="modify-rather-than-map" class="section level3">
<h3><span class="header-section-number">4.3.5</span> Modify rather than map</h3>
<p>When the return type is expected to be the same as the input type, that is, a list returning a list, or a character vector returning the same, <code>modify</code> can help with keeping strictly to those expectations.</p>
<p>In the example, simply adding 2 to each vector element produces an error, because the output is a <code>numeric</code>, or <code>double</code>. <code>modify</code> helps ensure some type safety in this way.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb94-1" title="1">vec =<span class="st"> </span><span class="kw">as.integer</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb94-2" title="2"></a>
<a class="sourceLine" id="cb94-3" title="3"><span class="kw">tryCatch</span>(</a>
<a class="sourceLine" id="cb94-4" title="4">  <span class="dt">expr =</span> {</a>
<a class="sourceLine" id="cb94-5" title="5">    </a>
<a class="sourceLine" id="cb94-6" title="6">    <span class="co"># this is what we want you to look at</span></a>
<a class="sourceLine" id="cb94-7" title="7">    </a>
<a class="sourceLine" id="cb94-8" title="8">    <span class="kw">modify</span>(vec, <span class="cf">function</span>(x) { (x <span class="op">+</span><span class="st"> </span><span class="dv">2</span>) })</a>
<a class="sourceLine" id="cb94-9" title="9">    </a>
<a class="sourceLine" id="cb94-10" title="10">    },</a>
<a class="sourceLine" id="cb94-11" title="11">  </a>
<a class="sourceLine" id="cb94-12" title="12">  <span class="co"># do not pay attention to this</span></a>
<a class="sourceLine" id="cb94-13" title="13">  <span class="dt">error =</span> <span class="cf">function</span>(e){</a>
<a class="sourceLine" id="cb94-14" title="14">    <span class="kw">print</span>(<span class="kw">toString</span>(e))</a>
<a class="sourceLine" id="cb94-15" title="15">  }</a>
<a class="sourceLine" id="cb94-16" title="16">)</a>
<a class="sourceLine" id="cb94-17" title="17"><span class="co">#&gt; [1] &quot;Error: Can&#39;t coerce element 1 from a double to a integer\n&quot;</span></a></code></pre></div>
<p>Converting the output to an integer, which was the original input type, serves as a solution.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" title="1"><span class="kw">modify</span>(vec, <span class="cf">function</span>(x) { <span class="kw">as.integer</span>(x <span class="op">+</span><span class="st"> </span><span class="dv">2</span>) })</a>
<a class="sourceLine" id="cb95-2" title="2"><span class="co">#&gt;  [1]  3  4  5  6  7  8  9 10 11 12</span></a></code></pre></div>
<div id="a-note-on-invoke" class="section level4 unnumbered">
<h4>A note on <code>invoke</code></h4>
<p><code>invoke</code> used to be a wrapper around <code>do.call</code>, and can still be found with its family of functions in <code>purrr</code>. It is however retired in favour of functionality already present in <code>map</code> and <code>rlang::exec</code>, the latter of which will be covered in another session.</p>
</div>
</div>
</div>
<div id="other-functions-for-working-with-lists" class="section level2">
<h2><span class="header-section-number">4.4</span> Other functions for working with lists</h2>
<p><code>purrr</code> has a number of functions to work with lists, especially lists that are not nested list-columns in a tibble.</p>
<div id="filtering-lists" class="section level3">
<h3><span class="header-section-number">4.4.1</span> Filtering lists</h3>
<p>Lists can be filtered on any predicate using <code>keep</code>, while the special case <code>compact</code> is applied when the empty elements of a list are to be filtered out. <code>discard</code> is the opposite of <code>keep</code>, and keeps only elements not satisfying a condition. Again, the predicate is specified by <code>.p</code>.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb96-1" title="1"><span class="co"># a list containing numbers</span></a>
<a class="sourceLine" id="cb96-2" title="2">this_list =<span class="st"> </span><span class="kw">list</span>(<span class="dt">a =</span> <span class="dv">1</span>, <span class="dt">b =</span> <span class="dv">-1</span>, <span class="dt">c =</span> <span class="dv">2</span>, <span class="dt">d =</span> <span class="ot">NULL</span>, <span class="dt">e =</span> <span class="ot">NA</span>)</a>
<a class="sourceLine" id="cb96-3" title="3"></a>
<a class="sourceLine" id="cb96-4" title="4"><span class="co"># remove the empty element</span></a>
<a class="sourceLine" id="cb96-5" title="5"><span class="co"># this must be done before using keep on the list</span></a>
<a class="sourceLine" id="cb96-6" title="6">this_list =<span class="st"> </span><span class="kw">compact</span>(this_list)</a></code></pre></div>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb97-1" title="1"><span class="co"># use discard to remove the NA</span></a>
<a class="sourceLine" id="cb97-2" title="2">this_list =<span class="st"> </span><span class="kw">discard</span>(this_list, <span class="dt">.p =</span>is.na)</a>
<a class="sourceLine" id="cb97-3" title="3"></a>
<a class="sourceLine" id="cb97-4" title="4"><span class="co"># keep list elements which are positive</span></a>
<a class="sourceLine" id="cb97-5" title="5"><span class="kw">keep</span>(this_list, <span class="dt">.p =</span> <span class="cf">function</span>(x){ x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> })</a>
<a class="sourceLine" id="cb97-6" title="6"><span class="co">#&gt; $a</span></a>
<a class="sourceLine" id="cb97-7" title="7"><span class="co">#&gt; [1] 1</span></a>
<a class="sourceLine" id="cb97-8" title="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb97-9" title="9"><span class="co">#&gt; $c</span></a>
<a class="sourceLine" id="cb97-10" title="10"><span class="co">#&gt; [1] 2</span></a></code></pre></div>
<p><code>head_while</code> is bit of an odd case, which returns all elements of a list-like object in sequence until the first one fails to satisfy a predicate, specified by <code>.p</code>.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb98-1" title="1"><span class="dv">1</span><span class="op">:</span><span class="dv">10</span> <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb98-2" title="2"><span class="st">  </span><span class="kw">head_while</span>(<span class="dt">.p =</span> <span class="cf">function</span>(x) x <span class="op">&lt;</span><span class="st"> </span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb98-3" title="3"><span class="co">#&gt; [1] 1 2 3 4</span></a></code></pre></div>
</div>
<div id="summarising-lists" class="section level3">
<h3><span class="header-section-number">4.4.2</span> Summarising lists</h3>
<p>The <code>purrr</code> functions <code>every</code>, <code>some</code>, <code>has_element</code>, <code>detect</code>, <code>detect_index</code>, and <code>vec_depth</code> help determine whether a list passes a certain logical test or not. These are seldom used and are not discussed here.</p>
</div>
<div id="reduction-and-accumulation" class="section level3">
<h3><span class="header-section-number">4.4.3</span> Reduction and accumulation</h3>
<p><code>reduce</code> helps combine elements along a list using a specific function. Consider the example below where list elements are concatenated into a single vector.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb99-1" title="1">this_list =<span class="st"> </span><span class="kw">list</span>(<span class="dt">a =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">b =</span> <span class="dv">3</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">c =</span> <span class="dv">5</span><span class="op">:</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb99-2" title="2"></a>
<a class="sourceLine" id="cb99-3" title="3"><span class="kw">reduce</span>(this_list, c)</a>
<a class="sourceLine" id="cb99-4" title="4"><span class="co">#&gt;  [1]  1  2  3  3  4  5  6  7  8  9 10</span></a></code></pre></div>
<p>This can also be applied to data frames. Consider some random samples of <code>mtcars</code>, each with only 5 cars removed. The objective is to find the cars present in all 10 samples.</p>
<p>The way <code>reduce</code> works in the example below is to take the first element and find its intersection with the second, and to take the result and find its intersection with the third and so on.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb100-1" title="1"><span class="co"># sample mtcars</span></a>
<a class="sourceLine" id="cb100-2" title="2">mtcars =<span class="st"> </span><span class="kw">as_tibble</span>(mtcars, <span class="dt">rownames =</span> <span class="st">&quot;car&quot;</span>)</a>
<a class="sourceLine" id="cb100-3" title="3">sampled_data =<span class="st"> </span><span class="kw">map</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="cf">function</span>(x){<span class="kw">sample_n</span>(mtcars, <span class="kw">nrow</span>(mtcars)<span class="op">-</span><span class="dv">5</span>)})</a>
<a class="sourceLine" id="cb100-4" title="4"></a>
<a class="sourceLine" id="cb100-5" title="5"><span class="co"># get cars which appear in all samples</span></a>
<a class="sourceLine" id="cb100-6" title="6">sampled_data =<span class="st"> </span><span class="kw">reduce</span>(sampled_data, dplyr<span class="op">::</span>inner_join)</a></code></pre></div>
<p><code>accumulate</code> works very similarly, except it retains the intermediate products. The first element is retained as is. <code>accumulate2</code> and <code>reduce2</code> work on two lists, following the same logic as <code>map2</code> etc.
Both functions can be used in much more complex ways than demonstrated here.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb101-1" title="1"><span class="co"># make a list</span></a>
<a class="sourceLine" id="cb101-2" title="2">this_list =<span class="st"> </span><span class="kw">list</span>(<span class="dt">a =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">b =</span> <span class="dv">3</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">c =</span> <span class="dv">5</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">d =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">12</span>))</a>
<a class="sourceLine" id="cb101-3" title="3"></a>
<a class="sourceLine" id="cb101-4" title="4"><span class="co"># a multiple accumulate can help</span></a>
<a class="sourceLine" id="cb101-5" title="5"><span class="kw">accumulate</span>(this_list, union, <span class="dt">.dir =</span> <span class="st">&quot;forward&quot;</span>)</a>
<a class="sourceLine" id="cb101-6" title="6"><span class="co">#&gt; $a</span></a>
<a class="sourceLine" id="cb101-7" title="7"><span class="co">#&gt; [1] 1 2 3</span></a>
<a class="sourceLine" id="cb101-8" title="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb101-9" title="9"><span class="co">#&gt; $b</span></a>
<a class="sourceLine" id="cb101-10" title="10"><span class="co">#&gt; [1] 1 2 3 4 5 6</span></a>
<a class="sourceLine" id="cb101-11" title="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb101-12" title="12"><span class="co">#&gt; $c</span></a>
<a class="sourceLine" id="cb101-13" title="13"><span class="co">#&gt;  [1]  1  2  3  4  5  6  7  8  9 10</span></a>
<a class="sourceLine" id="cb101-14" title="14"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb101-15" title="15"><span class="co">#&gt; $d</span></a>
<a class="sourceLine" id="cb101-16" title="16"><span class="co">#&gt;  [1]  1  2  3  4  5  6  7  8  9 10 12</span></a></code></pre></div>
</div>
<div id="miscellaneous-operation" class="section level3">
<h3><span class="header-section-number">4.4.4</span> Miscellaneous operation</h3>
<p><code>purrr</code> offers a few more functions to work with lists (or list like objects). <code>prepend</code> works very similarly to <code>append</code>, except it adds to the head of a list. <code>splice</code> adds multiple objects together in a list. <code>splice</code> will break the existing list structure of input lists.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" title="1"><span class="co"># use prepend to add values to the head of a list</span></a>
<a class="sourceLine" id="cb102-2" title="2"><span class="kw">prepend</span>(<span class="dt">x =</span> <span class="kw">list</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>), <span class="dt">values =</span> <span class="kw">list</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>))</a>
<a class="sourceLine" id="cb102-3" title="3"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb102-4" title="4"><span class="co">#&gt; [1] &quot;1&quot;</span></a>
<a class="sourceLine" id="cb102-5" title="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb102-6" title="6"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb102-7" title="7"><span class="co">#&gt; [1] &quot;2&quot;</span></a>
<a class="sourceLine" id="cb102-8" title="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb102-9" title="9"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb102-10" title="10"><span class="co">#&gt; [1] &quot;a&quot;</span></a>
<a class="sourceLine" id="cb102-11" title="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb102-12" title="12"><span class="co">#&gt; [[4]]</span></a>
<a class="sourceLine" id="cb102-13" title="13"><span class="co">#&gt; [1] &quot;b&quot;</span></a>
<a class="sourceLine" id="cb102-14" title="14"></a>
<a class="sourceLine" id="cb102-15" title="15"><span class="co"># use splice to add multiple elements together</span></a>
<a class="sourceLine" id="cb102-16" title="16"><span class="kw">splice</span>(<span class="kw">list</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>), <span class="kw">list</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>), <span class="st">&quot;something else&quot;</span>)</a>
<a class="sourceLine" id="cb102-17" title="17"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb102-18" title="18"><span class="co">#&gt; [1] &quot;a&quot;</span></a>
<a class="sourceLine" id="cb102-19" title="19"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb102-20" title="20"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb102-21" title="21"><span class="co">#&gt; [1] &quot;b&quot;</span></a>
<a class="sourceLine" id="cb102-22" title="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb102-23" title="23"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb102-24" title="24"><span class="co">#&gt; [1] &quot;1&quot;</span></a>
<a class="sourceLine" id="cb102-25" title="25"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb102-26" title="26"><span class="co">#&gt; [[4]]</span></a>
<a class="sourceLine" id="cb102-27" title="27"><span class="co">#&gt; [1] &quot;2&quot;</span></a>
<a class="sourceLine" id="cb102-28" title="28"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb102-29" title="29"><span class="co">#&gt; [[5]]</span></a>
<a class="sourceLine" id="cb102-30" title="30"><span class="co">#&gt; [1] &quot;something else&quot;</span></a></code></pre></div>
<p><code>flatten</code> has a similar behaviour, and converts a list of vectors or list of lists to a single list-like object. <code>flatten_*</code> options allow the output type to be specified.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb103-1" title="1">this_list =<span class="st"> </span><span class="kw">list</span>(<span class="dt">a =</span> <span class="kw">rep</span>(<span class="st">&quot;a&quot;</span>, <span class="dv">3</span>),</a>
<a class="sourceLine" id="cb103-2" title="2">                 <span class="dt">b =</span> <span class="kw">rep</span>(<span class="st">&quot;b&quot;</span>, <span class="dv">4</span>))</a>
<a class="sourceLine" id="cb103-3" title="3"></a>
<a class="sourceLine" id="cb103-4" title="4">this_list</a>
<a class="sourceLine" id="cb103-5" title="5"><span class="co">#&gt; $a</span></a>
<a class="sourceLine" id="cb103-6" title="6"><span class="co">#&gt; [1] &quot;a&quot; &quot;a&quot; &quot;a&quot;</span></a>
<a class="sourceLine" id="cb103-7" title="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb103-8" title="8"><span class="co">#&gt; $b</span></a>
<a class="sourceLine" id="cb103-9" title="9"><span class="co">#&gt; [1] &quot;b&quot; &quot;b&quot; &quot;b&quot; &quot;b&quot;</span></a>
<a class="sourceLine" id="cb103-10" title="10"></a>
<a class="sourceLine" id="cb103-11" title="11"><span class="co"># use flatten chr to get a character vector</span></a>
<a class="sourceLine" id="cb103-12" title="12"><span class="kw">flatten_chr</span>(this_list)</a>
<a class="sourceLine" id="cb103-13" title="13"><span class="co">#&gt; [1] &quot;a&quot; &quot;a&quot; &quot;a&quot; &quot;b&quot; &quot;b&quot; &quot;b&quot; &quot;b&quot;</span></a></code></pre></div>
<p><code>transpose</code> shifts the index order in multi-level lists. This is seen in the example, where the <code>gear</code> goes from being the index of the second level to the index of the first.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" title="1">this_list =<span class="st"> </span><span class="kw">split</span>(mtcars, mtcars<span class="op">$</span>cyl) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb104-2" title="2"><span class="st">  </span><span class="kw">map</span>(<span class="cf">function</span>(df) <span class="kw">split</span>(df, df<span class="op">$</span>gear))</a>
<a class="sourceLine" id="cb104-3" title="3"></a>
<a class="sourceLine" id="cb104-4" title="4"><span class="co"># from a list of lists where cars are divided by cylinders and then</span></a>
<a class="sourceLine" id="cb104-5" title="5"><span class="co"># gears, this is now a list of lists where cars are divided by</span></a>
<a class="sourceLine" id="cb104-6" title="6"><span class="co"># gears and then cylinders</span></a>
<a class="sourceLine" id="cb104-7" title="7"><span class="kw">transpose</span>(this_list[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb104-8" title="8"><span class="co">#&gt; $`3`</span></a>
<a class="sourceLine" id="cb104-9" title="9"><span class="co">#&gt; $`3`$`4`</span></a>
<a class="sourceLine" id="cb104-10" title="10"><span class="co">#&gt; # A tibble: 1 x 12</span></a>
<a class="sourceLine" id="cb104-11" title="11"><span class="co">#&gt;   car            mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span></a>
<a class="sourceLine" id="cb104-12" title="12"><span class="co">#&gt;   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb104-13" title="13"><span class="co">#&gt; 1 Toyota Coro…  21.5     4  120.    97   3.7  2.46  20.0     1     0     3     1</span></a>
<a class="sourceLine" id="cb104-14" title="14"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb104-15" title="15"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb104-16" title="16"><span class="co">#&gt; $`4`</span></a>
<a class="sourceLine" id="cb104-17" title="17"><span class="co">#&gt; $`4`$`4`</span></a>
<a class="sourceLine" id="cb104-18" title="18"><span class="co">#&gt; # A tibble: 8 x 12</span></a>
<a class="sourceLine" id="cb104-19" title="19"><span class="co">#&gt;   car            mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span></a>
<a class="sourceLine" id="cb104-20" title="20"><span class="co">#&gt;   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb104-21" title="21"><span class="co">#&gt; 1 Datsun 710    22.8     4 108      93  3.85  2.32  18.6     1     1     4     1</span></a>
<a class="sourceLine" id="cb104-22" title="22"><span class="co">#&gt; 2 Merc 240D     24.4     4 147.     62  3.69  3.19  20       1     0     4     2</span></a>
<a class="sourceLine" id="cb104-23" title="23"><span class="co">#&gt; 3 Merc 230      22.8     4 141.     95  3.92  3.15  22.9     1     0     4     2</span></a>
<a class="sourceLine" id="cb104-24" title="24"><span class="co">#&gt; 4 Fiat 128      32.4     4  78.7    66  4.08  2.2   19.5     1     1     4     1</span></a>
<a class="sourceLine" id="cb104-25" title="25"><span class="co">#&gt; 5 Honda Civic   30.4     4  75.7    52  4.93  1.62  18.5     1     1     4     2</span></a>
<a class="sourceLine" id="cb104-26" title="26"><span class="co">#&gt; 6 Toyota Coro…  33.9     4  71.1    65  4.22  1.84  19.9     1     1     4     1</span></a>
<a class="sourceLine" id="cb104-27" title="27"><span class="co">#&gt; # … with 2 more rows</span></a>
<a class="sourceLine" id="cb104-28" title="28"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb104-29" title="29"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb104-30" title="30"><span class="co">#&gt; $`5`</span></a>
<a class="sourceLine" id="cb104-31" title="31"><span class="co">#&gt; $`5`$`4`</span></a>
<a class="sourceLine" id="cb104-32" title="32"><span class="co">#&gt; # A tibble: 2 x 12</span></a>
<a class="sourceLine" id="cb104-33" title="33"><span class="co">#&gt;   car            mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span></a>
<a class="sourceLine" id="cb104-34" title="34"><span class="co">#&gt;   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb104-35" title="35"><span class="co">#&gt; 1 Porsche 914…  26       4 120.     91  4.43  2.14  16.7     0     1     5     2</span></a>
<a class="sourceLine" id="cb104-36" title="36"><span class="co">#&gt; 2 Lotus Europa  30.4     4  95.1   113  3.77  1.51  16.9     1     1     5     2</span></a></code></pre></div>
</div>
</div>
<div id="to-add-patchwork" class="section level2">
<h2><span class="header-section-number">4.5</span> To add: patchwork</h2>
<div id="final-words" class="section level4">
<h4><span class="header-section-number">4.5.0.1</span> Final words</h4>
<p>In general, an iteration based problem can usually be solved with <code>purrr</code>.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-manipulation-with-dplyr.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/pratikunterwegs/tres-tidy-tutorial/edit/master/04_working_with_lists.rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["TRES-Tidy-Tutorial.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
