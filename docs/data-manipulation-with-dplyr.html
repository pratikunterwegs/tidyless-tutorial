<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 3 Data manipulation with dplyr | TRES Tidyverse Tutorial</title>
  <meta name="description" content="Section 3 Data manipulation with dplyr | TRES Tidyverse Tutorial" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 3 Data manipulation with dplyr | TRES Tidyverse Tutorial" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Section 3 Data manipulation with dplyr | TRES Tidyverse Tutorial" />
  <meta name="github-repo" content="pratikunterwegs/tres-tidy-tutorial" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 3 Data manipulation with dplyr | TRES Tidyverse Tutorial" />
  
  <meta name="twitter:description" content="Section 3 Data manipulation with dplyr | TRES Tidyverse Tutorial" />
  

<meta name="author" content="Raphael, Pratik and Theo" />


<meta name="date" content="2020-06-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="reshaping-data-tables-in-the-tidyverse-and-other-things.html"/>
<link rel="next" href="working-with-lists-and-iteration.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Outline</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#schedule"><i class="fa fa-check"></i>Schedule</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#possible-extras"><i class="fa fa-check"></i>Possible extras</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#join"><i class="fa fa-check"></i>Join</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html"><i class="fa fa-check"></i><b>1</b> Reading files and string manipulation</a><ul>
<li class="chapter" data-level="1.1" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#data-import-and-export-with-readr"><i class="fa fa-check"></i><b>1.1</b> Data import and export with <code>readr</code></a><ul>
<li class="chapter" data-level="1.1.1" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#reading-data"><i class="fa fa-check"></i><b>1.1.1</b> Reading data</a></li>
<li class="chapter" data-level="1.1.2" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#writing-data"><i class="fa fa-check"></i><b>1.1.2</b> Writing data</a></li>
<li class="chapter" data-level="1.1.3" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#reading-and-writing-lines"><i class="fa fa-check"></i><b>1.1.3</b> Reading and writing lines</a></li>
<li class="chapter" data-level="" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#excel-files"><i class="fa fa-check"></i>Excel files</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#string-manipulation-with-stringr"><i class="fa fa-check"></i><b>1.2</b> String manipulation with <code>stringr</code></a><ul>
<li class="chapter" data-level="1.2.1" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#putting-strings-together"><i class="fa fa-check"></i><b>1.2.1</b> Putting strings together</a></li>
<li class="chapter" data-level="1.2.2" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#detecting-strings"><i class="fa fa-check"></i><b>1.2.2</b> Detecting strings</a></li>
<li class="chapter" data-level="1.2.3" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#matching-strings"><i class="fa fa-check"></i><b>1.2.3</b> Matching strings</a></li>
<li class="chapter" data-level="1.2.4" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#simpler-pattern-extraction"><i class="fa fa-check"></i><b>1.2.4</b> Simpler pattern extraction</a></li>
<li class="chapter" data-level="1.2.5" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#breaking-strings-apart"><i class="fa fa-check"></i><b>1.2.5</b> Breaking strings apart</a></li>
<li class="chapter" data-level="1.2.6" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#replacing-string-elements"><i class="fa fa-check"></i><b>1.2.6</b> Replacing string elements</a></li>
<li class="chapter" data-level="1.2.7" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#subsetting-within-strings"><i class="fa fa-check"></i><b>1.2.7</b> Subsetting within strings</a></li>
<li class="chapter" data-level="1.2.8" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#padding-and-truncating-strings"><i class="fa fa-check"></i><b>1.2.8</b> Padding and truncating strings</a></li>
<li class="chapter" data-level="1.2.9" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#stringr-aspects-not-covered-here"><i class="fa fa-check"></i><b>1.2.9</b> Stringr aspects not covered here</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#string-interpolation-with-glue"><i class="fa fa-check"></i><b>1.3</b> String interpolation with <code>glue</code></a></li>
<li class="chapter" data-level="1.4" data-path="reading-files-and-string-manipulation.html"><a href="reading-files-and-string-manipulation.html#strings-in-ggplot"><i class="fa fa-check"></i><b>1.4</b> Strings in <code>ggplot</code></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><i class="fa fa-check"></i><b>2</b> Reshaping data tables in the tidyverse, and other things</a><ul>
<li class="chapter" data-level="2.1" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#the-new-data-frame-tibble"><i class="fa fa-check"></i><b>2.1</b> The new data frame: tibble</a></li>
<li class="chapter" data-level="2.2" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#the-concept-of-tidy-data"><i class="fa fa-check"></i><b>2.2</b> The concept of tidy data</a></li>
<li class="chapter" data-level="2.3" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#reshaping-with-tidyr"><i class="fa fa-check"></i><b>2.3</b> Reshaping with <code>tidyr</code></a><ul>
<li class="chapter" data-level="2.3.1" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#pivoting"><i class="fa fa-check"></i><b>2.3.1</b> Pivoting</a></li>
<li class="chapter" data-level="2.3.2" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#handling-missing-values"><i class="fa fa-check"></i><b>2.3.2</b> Handling missing values</a></li>
<li class="chapter" data-level="2.3.3" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#splitting-and-combining-cells"><i class="fa fa-check"></i><b>2.3.3</b> Splitting and combining cells</a></li>
<li class="chapter" data-level="2.3.4" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#expanding-tables-using-combinations"><i class="fa fa-check"></i><b>2.3.4</b> Expanding tables using combinations</a></li>
<li class="chapter" data-level="2.3.5" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#nesting"><i class="fa fa-check"></i><b>2.3.5</b> Nesting</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#extra-factors-and-the-forcats-package"><i class="fa fa-check"></i><b>2.4</b> Extra: factors and the <code>forcats</code> package</a><ul>
<li class="chapter" data-level="2.4.1" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#change-the-order-of-the-levels"><i class="fa fa-check"></i><b>2.4.1</b> Change the order of the levels</a></li>
<li class="chapter" data-level="2.4.2" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#change-the-levels-themselves"><i class="fa fa-check"></i><b>2.4.2</b> Change the levels themselves</a></li>
<li class="chapter" data-level="2.4.3" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#dropping-levels"><i class="fa fa-check"></i><b>2.4.3</b> Dropping levels</a></li>
<li class="chapter" data-level="2.4.4" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#other-things"><i class="fa fa-check"></i><b>2.4.4</b> Other things</a></li>
<li class="chapter" data-level="2.4.5" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#take-home-message-for-forcats"><i class="fa fa-check"></i><b>2.4.5</b> Take home message for forcats</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="reshaping-data-tables-in-the-tidyverse-and-other-things.html"><a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html#external-resources"><i class="fa fa-check"></i><b>2.5</b> External resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html"><i class="fa fa-check"></i><b>3</b> Data manipulation with <code>dplyr</code></a><ul>
<li class="chapter" data-level="3.1" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#introduction"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#example-data-of-the-day"><i class="fa fa-check"></i><b>3.2</b> Example data of the day</a></li>
<li class="chapter" data-level="3.3" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#select-variables-with-select"><i class="fa fa-check"></i><b>3.3</b> Select variables with <code>select()</code></a></li>
<li class="chapter" data-level="3.4" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#select-observations-with-filter"><i class="fa fa-check"></i><b>3.4</b> Select observations with <code>filter()</code></a></li>
<li class="chapter" data-level="3.5" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#create-new-variables-with-mutate"><i class="fa fa-check"></i><b>3.5</b> Create new variables with <code>mutate()</code></a></li>
<li class="chapter" data-level="3.6" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#grouped-results-with-group_by-and-summarise"><i class="fa fa-check"></i><b>3.6</b> Grouped results with <code>group_by()</code> and <code>summarise()</code></a></li>
<li class="chapter" data-level="3.7" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#scoped-variables"><i class="fa fa-check"></i><b>3.7</b> Scoped variables</a></li>
<li class="chapter" data-level="3.8" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#more"><i class="fa fa-check"></i><b>3.8</b> More !</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html"><i class="fa fa-check"></i><b>4</b> Working with lists and iteration</a><ul>
<li class="chapter" data-level="4.1" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#iteration-with-map"><i class="fa fa-check"></i><b>4.1</b> Iteration with <code>map</code></a><ul>
<li class="chapter" data-level="4.1.1" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#basic-use-of-map"><i class="fa fa-check"></i><b>4.1.1</b> Basic use of <code>map</code></a></li>
<li class="chapter" data-level="4.1.2" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#map-variants-returning-vectors"><i class="fa fa-check"></i><b>4.1.2</b> <code>map</code> variants returning vectors</a></li>
<li class="chapter" data-level="4.1.3" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#integrating-map-and-tidyrnest"><i class="fa fa-check"></i><b>4.1.3</b> Integrating <code>map</code> and <code>tidyr::nest</code></a></li>
<li class="chapter" data-level="4.1.4" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#map-variants-returning-dataframes"><i class="fa fa-check"></i><b>4.1.4</b> <code>map</code> variants returning dataframes</a></li>
<li class="chapter" data-level="4.1.5" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#selective-mapping"><i class="fa fa-check"></i><b>4.1.5</b> Selective mapping</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#more-map-variants"><i class="fa fa-check"></i><b>4.2</b> More <code>map</code> variants</a><ul>
<li class="chapter" data-level="4.2.1" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#mapping-over-two-inputs-with-map2"><i class="fa fa-check"></i><b>4.2.1</b> Mapping over two inputs with map2</a></li>
<li class="chapter" data-level="4.2.2" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#mapping-over-multiple-inputs-with-pmap"><i class="fa fa-check"></i><b>4.2.2</b> Mapping over multiple inputs with pmap</a></li>
<li class="chapter" data-level="4.2.3" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#mapping-at-depth"><i class="fa fa-check"></i><b>4.2.3</b> Mapping at depth</a></li>
<li class="chapter" data-level="4.2.4" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#iteration-without-a-return"><i class="fa fa-check"></i><b>4.2.4</b> Iteration without a return</a></li>
<li class="chapter" data-level="4.2.5" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#modify-rather-than-map"><i class="fa fa-check"></i><b>4.2.5</b> Modify rather than map</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#working-with-lists"><i class="fa fa-check"></i><b>4.3</b> Working with lists</a><ul>
<li class="chapter" data-level="4.3.1" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#filtering-lists"><i class="fa fa-check"></i><b>4.3.1</b> Filtering lists</a></li>
<li class="chapter" data-level="4.3.2" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#summarising-lists"><i class="fa fa-check"></i><b>4.3.2</b> Summarising lists</a></li>
<li class="chapter" data-level="4.3.3" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#reduction-and-accumulation"><i class="fa fa-check"></i><b>4.3.3</b> Reduction and accumulation</a></li>
<li class="chapter" data-level="4.3.4" data-path="working-with-lists-and-iteration.html"><a href="working-with-lists-and-iteration.html#miscellaneous-operation"><i class="fa fa-check"></i><b>4.3.4</b> Miscellaneous operation</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">TRES Tidyverse Tutorial</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-manipulation-with-dplyr" class="section level1">
<h1><span class="header-section-number">Section 3</span> Data manipulation with <code>dplyr</code></h1>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" title="1"><span class="co"># load the tidyverse</span></a>
<a class="sourceLine" id="cb70-2" title="2"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<div id="introduction" class="section level2">
<h2><span class="header-section-number">3.1</span> Introduction</h2>
<p>Reminders from last weeks: pipe operator, tidy tables, ggplot</p>
<p>Why dplyr ? dplyr vs base R</p>
</div>
<div id="example-data-of-the-day" class="section level2">
<h2><span class="header-section-number">3.2</span> Example data of the day</h2>
<p>Through this tutorial, we will be using mammal trait data from the <a href="https://megapast2future.github.io/PHYLACINE_1.2/">Phylacine</a> database. The dataset contains information on mass, diet, life habit, etc, for more than all living species of mammals. Let’s have a look.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" title="1">phylacine &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="st">&quot;data/phylacine_traits.csv&quot;</span>)</a>
<a class="sourceLine" id="cb71-2" title="2">phylacine</a>
<a class="sourceLine" id="cb71-3" title="3"><span class="co">#&gt; # A tibble: 5,831 x 24</span></a>
<a class="sourceLine" id="cb71-4" title="4"><span class="co">#&gt;   Binomial.1.2 Order.1.2 Family.1.2 Genus.1.2 Species.1.2 Terrestrial Marine</span></a>
<a class="sourceLine" id="cb71-5" title="5"><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;             &lt;dbl&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb71-6" title="6"><span class="co">#&gt; 1 Abditomys_l… Rodentia  Muridae    Abditomys latidens              1      0</span></a>
<a class="sourceLine" id="cb71-7" title="7"><span class="co">#&gt; 2 Abeomelomys… Rodentia  Muridae    Abeomelo… sevia                 1      0</span></a>
<a class="sourceLine" id="cb71-8" title="8"><span class="co">#&gt; 3 Abrawayaomy… Rodentia  Cricetidae Abrawaya… ruschii               1      0</span></a>
<a class="sourceLine" id="cb71-9" title="9"><span class="co">#&gt; 4 Abrocoma_be… Rodentia  Abrocomid… Abrocoma  bennettii             1      0</span></a>
<a class="sourceLine" id="cb71-10" title="10"><span class="co">#&gt; 5 Abrocoma_bo… Rodentia  Abrocomid… Abrocoma  boliviensis           1      0</span></a>
<a class="sourceLine" id="cb71-11" title="11"><span class="co">#&gt; 6 Abrocoma_bu… Rodentia  Abrocomid… Abrocoma  budini                1      0</span></a>
<a class="sourceLine" id="cb71-12" title="12"><span class="co">#&gt; # … with 5,825 more rows, and 17 more variables: Freshwater &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb71-13" title="13"><span class="co">#&gt; #   Aerial &lt;dbl&gt;, Life.Habit.Method &lt;chr&gt;, Life.Habit.Source &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb71-14" title="14"><span class="co">#&gt; #   Mass.g &lt;dbl&gt;, Mass.Method &lt;chr&gt;, Mass.Source &lt;chr&gt;, Mass.Comparison &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb71-15" title="15"><span class="co">#&gt; #   Mass.Comparison.Source &lt;chr&gt;, Island.Endemicity &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb71-16" title="16"><span class="co">#&gt; #   IUCN.Status.1.2 &lt;chr&gt;, Added.IUCN.Status.1.2 &lt;chr&gt;, Diet.Plant &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb71-17" title="17"><span class="co">#&gt; #   Diet.Vertebrate &lt;dbl&gt;, Diet.Invertebrate &lt;dbl&gt;, Diet.Method &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb71-18" title="18"><span class="co">#&gt; #   Diet.Source &lt;chr&gt;</span></a></code></pre></div>
<p>Note the friendly output given by the <code>tibble</code> (as opposed to a <code>data.frame</code>). <code>readr</code> automatically stores the content it reads in a <code>tibble</code>, tidyverse oblige. You should know however that <code>dplyr</code> doesn’t require your data to be in a tibble, a regular <code>data.frame</code> will work just as fine.</p>
<p>Most of the <code>dplyr</code> verbs covered in the next sections assume your data is <em>tidy</em>: wide format, variables as column, 1 observation per row. Not that tehy won’t work if your data isn’t tidy, but the results could be very different from what I’m going to show here. Fortunately, the phylacine trait dataset appears to be tidy: there is one unique entry for each species.</p>
<p>The first operation I’m going to run on this table is changing the names with
<code>rename()</code>. Some people prefer their tea without sugar, and I <a href="https://style.tidyverse.org/syntax.html#object-names">prefer</a> my
variable names without uppercase characters, dots or (if possible) numbers.
This will give me the opportunity to introduce the trivial syntax
of <code>dplyr</code> verbs.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" title="1">phylacine &lt;-<span class="st"> </span>phylacine <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb72-2" title="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">rename</span>(</a>
<a class="sourceLine" id="cb72-3" title="3">    <span class="st">&quot;binomial&quot;</span> =<span class="st"> </span>Binomial.<span class="fl">1.2</span>,</a>
<a class="sourceLine" id="cb72-4" title="4">    <span class="st">&quot;order&quot;</span> =<span class="st"> </span>Order.<span class="fl">1.2</span>,</a>
<a class="sourceLine" id="cb72-5" title="5">    <span class="st">&quot;family&quot;</span> =<span class="st"> </span>Family.<span class="fl">1.2</span>,</a>
<a class="sourceLine" id="cb72-6" title="6">    <span class="st">&quot;genus&quot;</span> =<span class="st"> </span>Genus.<span class="fl">1.2</span>,</a>
<a class="sourceLine" id="cb72-7" title="7">    <span class="st">&quot;species&quot;</span> =<span class="st"> </span>Species.<span class="fl">1.2</span>,</a>
<a class="sourceLine" id="cb72-8" title="8">    <span class="st">&quot;terrestrial&quot;</span> =<span class="st"> </span>Terrestrial,</a>
<a class="sourceLine" id="cb72-9" title="9">    <span class="st">&quot;marine&quot;</span> =<span class="st"> </span>Marine,</a>
<a class="sourceLine" id="cb72-10" title="10">    <span class="st">&quot;freshwater&quot;</span> =<span class="st"> </span>Freshwater,</a>
<a class="sourceLine" id="cb72-11" title="11">    <span class="st">&quot;aerial&quot;</span> =<span class="st"> </span>Aerial,</a>
<a class="sourceLine" id="cb72-12" title="12">    <span class="st">&quot;life_habit_method&quot;</span> =<span class="st"> </span>Life.Habit.Method,</a>
<a class="sourceLine" id="cb72-13" title="13">    <span class="st">&quot;life_habit_source&quot;</span> =<span class="st"> </span>Life.Habit.Source,</a>
<a class="sourceLine" id="cb72-14" title="14">    <span class="st">&quot;mass_g&quot;</span> =<span class="st"> </span>Mass.g,</a>
<a class="sourceLine" id="cb72-15" title="15">    <span class="st">&quot;mass_method&quot;</span> =<span class="st"> </span>Mass.Method,</a>
<a class="sourceLine" id="cb72-16" title="16">    <span class="st">&quot;mass_source&quot;</span> =<span class="st"> </span>Mass.Source,</a>
<a class="sourceLine" id="cb72-17" title="17">    <span class="st">&quot;mass_comparison&quot;</span> =<span class="st"> </span>Mass.Comparison,</a>
<a class="sourceLine" id="cb72-18" title="18">    <span class="st">&quot;mass_comparison_source&quot;</span> =<span class="st"> </span>Mass.Comparison.Source,</a>
<a class="sourceLine" id="cb72-19" title="19">    <span class="st">&quot;island_endemicity&quot;</span> =<span class="st"> </span>Island.Endemicity,</a>
<a class="sourceLine" id="cb72-20" title="20">    <span class="st">&quot;iucn_status&quot;</span> =<span class="st"> </span>IUCN.Status.<span class="fl">1.2</span>, <span class="co"># not even for acronyms</span></a>
<a class="sourceLine" id="cb72-21" title="21">    <span class="st">&quot;added_iucn_status&quot;</span> =<span class="st">  </span>Added.IUCN.Status.<span class="fl">1.2</span>,</a>
<a class="sourceLine" id="cb72-22" title="22">    <span class="st">&quot;diet_plant&quot;</span> =<span class="st"> </span>Diet.Plant,</a>
<a class="sourceLine" id="cb72-23" title="23">    <span class="st">&quot;diet_vertebrate&quot;</span> =<span class="st"> </span>Diet.Vertebrate,</a>
<a class="sourceLine" id="cb72-24" title="24">    <span class="st">&quot;diet_invertebrate&quot;</span> =<span class="st"> </span>Diet.Invertebrate,</a>
<a class="sourceLine" id="cb72-25" title="25">    <span class="st">&quot;diet_method&quot;</span> =<span class="st"> </span>Diet.Method,</a>
<a class="sourceLine" id="cb72-26" title="26">    <span class="st">&quot;diet_source&quot;</span> =<span class="st"> </span>Diet.Source</a>
<a class="sourceLine" id="cb72-27" title="27">  )</a></code></pre></div>
<p>For convenience, I’m going to use the pipe operator (<code>%&gt;%</code>) that we’ve seen
before, through this chapter. All <code>dplyr</code> functions are built to work with the
pipe (i.e, their firstargument is always <code>data</code>), but again, this is not
compulsory. I could do</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" title="1">phylacine &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">rename</span>(</a>
<a class="sourceLine" id="cb73-2" title="2">  <span class="dt">data =</span> phylacine,</a>
<a class="sourceLine" id="cb73-3" title="3">  <span class="st">&quot;binomial&quot;</span> =<span class="st"> </span>Binomial.<span class="fl">1.2</span>,</a>
<a class="sourceLine" id="cb73-4" title="4">  <span class="co"># ...</span></a>
<a class="sourceLine" id="cb73-5" title="5">)</a></code></pre></div>
<p>Note how columns are referred to. Once the data as been passed as an argument,
no need to refer to it anymore, <code>dplyr</code> understands that you’re dealing with
variables inside that data frame. So drop that <code>data$var</code>, <code>data[, "var"]</code>,
and, if you’ve read <em>The R book</em>, forget the very existence of <code>attach()</code>.</p>
<p>Finally, I should mention that you can refer to variables names either with strings or directly as objects, whether you’re reading or creating them:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" title="1">phylacine2 &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="st">&quot;data/phylacine_traits.csv&quot;</span>)</a>
<a class="sourceLine" id="cb74-2" title="2"></a>
<a class="sourceLine" id="cb74-3" title="3">phylacine2 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb74-4" title="4"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">rename</span>(</a>
<a class="sourceLine" id="cb74-5" title="5">    <span class="co"># this works</span></a>
<a class="sourceLine" id="cb74-6" title="6">    <span class="dt">binomial =</span> Binomial.<span class="fl">1.2</span></a>
<a class="sourceLine" id="cb74-7" title="7">  )</a>
<a class="sourceLine" id="cb74-8" title="8">phylacine2 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb74-9" title="9"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">rename</span>(</a>
<a class="sourceLine" id="cb74-10" title="10">    <span class="co"># this works too!</span></a>
<a class="sourceLine" id="cb74-11" title="11">    <span class="dt">binomial =</span> <span class="st">&quot;Binomial.1.2&quot;</span></a>
<a class="sourceLine" id="cb74-12" title="12">  )</a>
<a class="sourceLine" id="cb74-13" title="13">phylacine2 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb74-14" title="14"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">rename</span>(</a>
<a class="sourceLine" id="cb74-15" title="15">    <span class="co"># guess what</span></a>
<a class="sourceLine" id="cb74-16" title="16">    <span class="st">&quot;binomial&quot;</span> =<span class="st"> &quot;Binomial.1.2&quot;</span></a>
<a class="sourceLine" id="cb74-17" title="17">  )</a></code></pre></div>
</div>
<div id="select-variables-with-select" class="section level2">
<h2><span class="header-section-number">3.3</span> Select variables with <code>select()</code></h2>
</div>
<div id="select-observations-with-filter" class="section level2">
<h2><span class="header-section-number">3.4</span> Select observations with <code>filter()</code></h2>
</div>
<div id="create-new-variables-with-mutate" class="section level2">
<h2><span class="header-section-number">3.5</span> Create new variables with <code>mutate()</code></h2>
<p>can also edit existing ones</p>
<p>drop existing variables with <code>transmute()</code></p>
</div>
<div id="grouped-results-with-group_by-and-summarise" class="section level2">
<h2><span class="header-section-number">3.6</span> Grouped results with <code>group_by()</code> and <code>summarise()</code></h2>
</div>
<div id="scoped-variables" class="section level2">
<h2><span class="header-section-number">3.7</span> Scoped variables</h2>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" title="1"><span class="kw">data</span>(mtcars)</a>
<a class="sourceLine" id="cb75-2" title="2">mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select_all</span>(toupper)</a>
<a class="sourceLine" id="cb75-3" title="3"></a>
<a class="sourceLine" id="cb75-4" title="4">is_whole &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">all</span>(<span class="kw">floor</span>(x) <span class="op">==</span><span class="st"> </span>x)</a>
<a class="sourceLine" id="cb75-5" title="5">mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select_if</span>() <span class="co"># select integers only</span></a>
<a class="sourceLine" id="cb75-6" title="6"></a>
<a class="sourceLine" id="cb75-7" title="7">mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select_at</span>(<span class="kw">vars</span>(<span class="op">-</span><span class="kw">contains</span>(<span class="st">&quot;ar&quot;</span>)))</a>
<a class="sourceLine" id="cb75-8" title="8">mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select_at</span>(<span class="kw">vars</span>(<span class="op">-</span><span class="kw">contains</span>(<span class="st">&quot;ar&quot;</span>), <span class="kw">starts_with</span>(<span class="st">&quot;c&quot;</span>)))</a></code></pre></div>
</div>
<div id="more" class="section level2">
<h2><span class="header-section-number">3.8</span> More !</h2>
<p>dolla sign x point operator
variables values -&gt; dplyr::distinct() eq. to base::unique()
sample()
slice()</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="reshaping-data-tables-in-the-tidyverse-and-other-things.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="working-with-lists-and-iteration.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/pratikunterwegs/tres-tidy-tutorial/edit/master/03_data_manipulation_with_dplyr.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
